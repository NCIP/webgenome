<?xml version="1.0"?>

<!--L
   Copyright RTI International

   Distributed under the OSI-approved BSD 3-Clause License.
   See http://ncip.github.com/webgenome/LICENSE.txt for details.
L-->

<?xml-stylesheet type="text/xsl" href="help.xsl"?>
<help-doc title="WebGenome Help">

	<!-- ============================================================ -->
	<!--                   Overview                                   -->
	<!-- ============================================================ -->
	<section title="WebGenome Version 2.3 Overview" id="overview">
		<p>
			WebGenome is a web-based application for
			creating genomics plots of array-based data
			and genomic annotation.  Version 2.3 provides a client
			plotting service to external applications, such as
			Rembrandt.  Users must enter webGenome through redirection
			from another application; the only way to load data is
			by selecting it in the referring client application.
		</p>
		
		<p>
			Data types supported in this version include
			copy number (i.e., aCGH),
			<ref id="loh">loss of heterozygosity (LOH)</ref>,
			and gene expression.  Two basic types of plots
			can be generated:
		</p>
		
		<prop-list>
			<prop name="Scatter Plots" refid="scatterPlot">
				Plots DNA copy number measurements
				across the genome, chromosome, or chromosomal interval.
			</prop>
			
			<prop name="Ideogram Plot" refid="ideogramPlot">
				Shows chromosomal amplifications
				and deletions in relation to cytogenetic chromosome ideograms.
			</prop>
		</prop-list>
		
		<p>
			The underlying data model used by webGenome is a very simplied version of
			the MAGE-OM.  The most important concept for the use of the system
			is that individual array data sets, called <em>bioassays</em> are aggregated
			into experiments.
		</p>
	</section>
	
	<!-- =============================================================== -->
	<!--          Workspace                                              -->
	<!-- =============================================================== -->
	
	<section title="The User's Workspace" id="cart">
		<p>
			The user's workspace holds accumulated raw data sets loaded by the client
			application, statistically processed data sets derived from
			raw or other processed data, and generated plots.  For
			each experiment, the list of nested bioassays is also shown.
			Users may change the names of experiments and bioassays in this
			screen.  Names do not have to be unique and can be empty
			if desired.  Users may delete experiments and plots.
		</p>
		
		<p>
			Each bioassay has an associated color.  These colors are
			used in scatter plots to distinguish between bioassays.
			Colors are initialized by the system.  Users may change
			colors, and all future plots will use the new colors.  However,
			previously-generated plots in the cart will retain the original
			colors.
		</p>
		
		<p>
			From the workspace, users may select one or more experiments
			and generate new plots or perform analytic operations.  New plots
			and statistically processed experiments are saved back into the
			cart.
		</p>
	</section>
	
	
	<!-- =============================================================== -->
	<!--                         Plots                                   -->
	<!-- =============================================================== -->
	<section title="Plots" id="plots">
	In this section we describe plotting functionality including the
	types of plots that can be generated and plotting parameters that
	can be set by the user.  Functionality to create new plots
	is accessible from the workspace screen.
	
	<!-- ============= Plot Types ======================= -->
		<section title="Plot Types" id="plotTypes">
			WebGenome 2.3 includes two plot types: scatter plots and ideogram
			plots.
		
			<!-- Scatter plot -->
			<section title="Scatter Plot" id="scatterPlot">
				<p>
				Scatter plots display array reporter values (e.g. copy number)
				against physical genome location.  Users can plot data points,
				regression lines, and confidence intervals in these plots.
				If data are loss of
				<ref id="loh">heterozygosity (LOH)</ref>, then the
				endpoints of LOH regions are inferred and shown as
				thick horizontal lines.  The Y-coordinates of these lines
				are equal to the average probability of
				LOH weighted
				by the chromosomal distance between adjacent reporters.
				</p>
				
				<p>
				Scatter plots provide basic interactivity.  Clicking
				on a data point causes all data points and lines from
				the bioassay to be highlighted.  Also the name of the
				selected bioassay will be outlined in the plot legend.
				Moving the
				mouse across the plot will cause a tool tip to show
				the nearest reporter.  If available, nearby genes will
				also be displayed along with arbitrary annotations that
				may be available through the client application.
				</p>
			</section>
			
			<!-- Ideogram plot -->
			<section title="Ideogram Plot" id="ideogramPlot">
				This plot shows color-coded data values in relation to
				chromosome ideograms.  The color coding goes from
				green to blue to red, which indicates data values that
				are low, medium, and high, respectively.  Moving the mouse
				over ideograms causes a tool tip to display the cytoband
				and physical chromosomal location under the pointer.
				Moving the mouse over data tracks causes a tool tip
				to indicate the physical chromosomal interval and data value
				under the pointer.  If available, nearby genes will
				also be displayed along with arbitrary annotations that
				may be available through the client application.
			</section>
			
		</section>
		
		<!-- Plotting parameters -->
		<section title="Plotting Parameters" id="plotParams">
			Plotting parameters control how data will be presented graphically.
			Some parameters that are common to all plot types,
			such as genome intervals.  Some parameters specific to one
			type of plot.  After the user elects to create a new plot
			from the workspace, a form showing parameters for
			the selected plot type is displayed.  The user may
			later change these parameter settings by clicking on
			a link above displayed plots.  Descriptions of the
			various parameters are given here.

			<section title="Common Plot Paremeters" id="commonPlotParameters">
				These parameters are common to all plots.
				<prop-list>
					<prop name="Plot name" id="param-plotName">
						This parameter enables the user to name the plot.
						This name need not be unique and can be changed
						at any time with no harm.
					</prop>
					
					<!-- Genome segment -->
					<prop name="Genome intervals" id="param-genomeIntervals">
						This parameter constrains the genome interval that will
						be displayed in plots.  Genome segments should be specified in the
						following format: CHROMOSOME[:FROM-TO][,CHROMOSOME[:FROM-TO]]*
						
						<p><b>Examples</b></p>
						
						<p>
							3:40000-50000<br/>
							3,5:140000-160000<br/>
							1,2<br/>
							1:5000-7000,2:30000-100000
						</p>
					</prop>
			
					<!-- Number of rows per plot -->
					<prop name="Number of plot per row" id="param-numPlotPerRow">
						When the user specifies multiple genome intervals,
						the intervals will be displayed in different plots,
						which will be laid out in rows.  This parameter
						specifies how many plots will be in a row.
					</prop>
					
					<!-- Show reporter names -->
					<prop name="Show reporter names" id="param-showReporterNames">
						If this property is checked, names of reporters
						near mouse will be displayed
						in the mouseover text.
					</prop>
					
					<!-- Show annotation -->
					<prop name="Show reporter annotation" id="param-showAnnotation">
						If this property is checked, then annotation associated
						with the reporter under the mouse will be displayed
						in the mouseover text.
					</prop>
					
					<!-- Show genes -->
					<prop name="Show gene names" id="param-showGenes">
						If this property is checked, then names of genes
						near the location of the under the mouse pointer
						will be displayed
						in the mouseover text.
					</prop>
				</prop-list>
			</section>
			
			<section title="Scatter Plot Parameters" id="scatterPlotParameters">
				The following parameters are specific to scatter plots.
				<prop-list>
					
					<prop name="LOH probability threshold" id="param-lohThreshold">
						<ref id="loh">Loss of heterozygosity (LOH)</ref>
						data may be provided
						by the client application
						as probabilities.  This parameter is a threshold,
						above which probabilities will be interpred as
						indicative of LOH.
					</prop>
					
					<prop name="Interpoloate LOH endpoints" id="param-interpolateLohEndpoints">
						This parameter is only applicable if the data are
						<ref id="loh">LOH(loss of heterozygosity)</ref>.
						Scatter plots of
						LOH indicate LOH regions as thick horizontal
						lines.  If for two adjacent reporters one is indicating LOH
						and the other is not, the location where the
						transition occurs cannot be known.  If this parameter
						is checked, the system will interpolate the
						LOH endpoint using the slope of a straight line
						between data points corresponding to the two reporters.
						If unchecked, the endpoint will be at the LOH reporter.
					</prop>
					
					<prop name="Include raw LOH probabilities" id="param-drawRawLohProbabilities">
						This parameter is only applicable if the data are
						<ref id="loh">LOH(loss of heterozygosity)</ref>.
						Scatter plots of
						LOH indicate LOH regions as thick horizontal
						lines.  If this parameter is checked, then the underlying
						raw LOH probabilites are also plotted.
					</prop>
					
					<prop name="Minimum plot value" id="param-minY">
						This sets the minimum value on the scatter plot Y-axis.
					</prop>
					
					<prop name="Maximum plot value" id="param-maxY">
						This sets the maximum value on the scatter plot Y-axis.
					</prop>
					
					<prop name="Plot width in pixels" id="param-width">
						This sets the width of each individual scatter plot
						in pixels.  If multiple genome intervals are selected,
						then this propery applies to each of the corresponding
						plots.
					</prop>
					
					<prop name="Plot height in pixels" id="param-height">
						This sets the height of each individual scatter plot
						in pixels.  If multiple genome intervals are selected,
						then this propery applies to each of the corresponding
						plots.
					</prop>
					
					<prop name="Draw horizontal grid lines" id="param-drawHorizGridLines">
						If checked, horizontal grid lines emenating from
						the major tic marks on the Y-axis will be drawn across
						scatter plot.  
					</prop>
					
					<prop name="Draw vertical grid lines" id="param-drawVertGridLines">
						If checked, vertical grid lines emenating from
						the major tic marks on the X-axis will be drawn across
						scatter plot. 
					</prop>
					
					<prop name="Draw points" id="param-drawPoints">
						If checked, indivdual data points will be painted for
						each datum.
					</prop>
					
					<prop name="Draw error bars if plotting means" id="param-drawErrorBars">
						The averaging analytic operation also calculates
						standard error values.  When plotting averages in
						a scatter plot, if this is checked then error
						bars will be painted for each data point.
					</prop>
					
					<prop name="Type of interpolation between data points" id="param-interpolationType">
						Enables the user to specify if and how data points
						will be connected.  Options include none, straight
						lines, steps, or splines.
					</prop>
				</prop-list>
			</section>
			
			<section title="Ideogram Plot Parameters" id="ideogramPlotParameters">
				The following parameters are specific to ideogram plots.
				<prop-list>
					<prop name="Ideogram size" id="param-ideogramSize">
						This enables the user to set the relative height
						of chromosome ideograms.
					</prop>
					
					<prop name="Ideogram width" id="param-ideogramThickness">
						This specifies the width of chromosome ideograms
						in pixels.
					</prop>
					
					<prop name="Data track width" id="param-trackWidth">
						This specifies the width of data tracks in pixels.
					</prop>
					
					<prop name="Minimum data mask value" id="param-minMask">
						Background data values within a
						range (e.g., -0.2 and 0.3) can be masked
						so that only values of significant
						magnitude are colored.  This parameter is the
						the lower end of this range.
					</prop>
					
					<prop name="Maximum data mask value" id="param-maxMask">
						Background data values within a
						range (e.g., -0.2 and 0.3) can be masked
						so that only values of significant
						magnitude are colored.  This parameter is the
						the upper end of this range.
					</prop>
					
					<prop name="Minimum saturation value" id="param-minSaturation">
						Data tracks color code measured values (e.g. copy number)
						from green to blue to red.  These colors correspond to
						low, medium, and high values, respectively.  The saturation
						values indicate which values are mapped to pure green
						or red.  Values below and above the saturation points
						are mapped to pure green and red, respectively.
						This parameter is for the lower saturation value.
					</prop>
					
					<prop name="Maximum saturation value" id="param-maxSaturation">
						Data tracks color code measured values (e.g. copy number)
						from green to blue to red.  These colors correspond to
						low, medium, and high values, respectively.  The saturation
						values indicate which values are mapped to pure green
						or red.  Values below and above the saturation points
						are mapped to pure green and red, respectively.
						This parameter is for the upper saturation value.
					</prop>
				</prop-list>
			</section>
		</section>
	</section>
	
	<!-- ================================================================= -->
	<!--                       Analytic Operations                         -->
	<!-- ================================================================= -->
	<section title="Analytic Operations" id="operations">
		In this section we describe the analytic operation that can
		be performed on data in the user's workspace.  Once a user
		has selected one or more experiments, they may elect to
		perform an analytic operation on these experiments.
		The resulting processed data will be deposited back in the
		user's workspace.  Analytic operations may be performed on
		all raw experiments (i.e., experiments loaded from the client
		application directory) and most processed data.  Processed
		experiments resulting from the
		<ref id="op-7">minimum common alterations</ref> operation
		cannot be further processed because individual data points
		are dropped.
		
		<prop-list>
		
			<prop name="Bioconductor aCGH smoother" id="op-1">
				This operation invokes the aCGH hidden Markov model-based
				method from the Bioconductor software package to
				smooth data.
			</prop>
			
			<prop name="Average" id="op-2">
				This operation performs chromosome position-wise averaging
				of all data points within the same experiment.
			</prop>
			
			<prop name="Range based filter" id="op-3">
				This operation filters out all data with values
				between two endpoints and is
				used primarily for removing outliers.
				The upper and lower endpoints
				may be INFINITY or -INFINITY, respectively.  This operation
				includes the following parameters:
				<prop-list>
					<prop name="Lower bound" id="opParam-lowerBound">
						Lower filter endpoint
					</prop>
					<prop name="Upper bound" id="opParam-upperBound">
						Upper filter endpoint
					</prop>
				</prop-list>
			</prop>
			
			<prop name="Simple bioassay-based normalization" id="op-4">
				This operation subtracts the bioassay specific mean or median
				from each observation. The user specifies the use of the mean
				or median as the normalization factor. The choice of median
				based normalization allows the user to lessen the effect
				of outliers.  This type of normalization is useful for making
				spot intensities comparable across arrays 
				as it removes an overall array effect; each array will be 
				"centered" on zero (or something 
				close to it if the median is used).
			</prop>
			
			<prop name="Simple experiment-based normalization" id="op-5">
				This procedure subtracts the array specific mean or median from
				each observation then adds the experiment level mean or median
				back to each observation. The user specifies 
				the use of the mean or median as the normalization factor.
				The choice of median based 
				normalization allows the user to lessen the effect of outliers.
				This type of normalization 
				is useful for making spot intensities comparable across arrays 
				while preserving any overall 
				difference due to treatment effect. This will center each array 
				on the difference between 
				it's own array mean/median and the experiment wide mean/median. 
			</prop>
		
			<prop name="Sliding window smoother" id="op-6">
				This operation smooths data using a "sliding window" approach. 
				The user
				specified a <em>Window size</em>.  The value of probe <em>i</em>
				is equal to the average value of probes <em>i - w/2</em> through 
				<em>i + w/2</em>, where <em>w</em> is the size of the window.
			</prop>
			
			<prop name="Minimum common alterations" id="op-7">
				This operation identifies the set of common alteration across
				bioassays.  These alterations are defined by a
				<em>threshold</em> and a <em>minPercent</em> property.
				The <em>threshold</em> is used for scoring alterations.
				For instance, if the threshold is set to 0.5, then all 
				<ref id="loh">LOH</ref> probability values greater than
				this value will be
				considered LOH.  The <em>minPercent</em> propety defines
				the minimum percentage of bioassays that must contain
				an alteration at a particular location for the alteration
				to be considered common.
			</prop>
			
			<prop name="Linear regression" id="op-8">
				This operation peforms data smoothing using linear regression.
			</prop>
			
			<prop name="Loess regression" id="op-9">
				This operation peforms data smoothing using Loess regression.
			</prop>
		</prop-list>
	</section>
	
	<!-- =========================================== -->
	<!--                 Appendix                    -->
	<!-- =========================================== -->
	<section title="Appendix" id="operations">
		<section title="LOH Measurements" id="loh">
		
		<p>
			Loss of heterozygosity (LOH) is detected by measuring
			the amount of DNA from each
			allele from tumor cells and comparing this with the amounts
			found from normal tissue in the same individual or a reference sample.
			A skewed distribution in the tumor cells, compared with those
			found in the normal tissue, indicates an allelic
			imbalance. This imbalance can result from either loss of an allele
			(true LOH) or allelic amplification. Some earlier articles reporting
			LOH may, for technical reasons, have measured allelic amplification
			rather than loss of an allele.
		</p>
		
		<p>
			LOH measurements are reported as the
			-log10 of the probability of continuous genomic region of
			homozygote calls.
			Thus, the larger the LOH value is, the more likely the value
			indicates a true LOH
			(or allelic amplification). The following formulae are
			used to compute LOH values:
		</p>
		
		<img src="loh_formula.png" align="center" border="1"/>

		</section>
	</section>
</help-doc>