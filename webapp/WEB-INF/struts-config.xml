<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
          "struts-config_1_1.dtd">

<struts-config>

	<!-- ====================================================== -->
	<!--                    Form Beans                          -->
	<!-- ====================================================== -->
	
	<form-beans>
	
	<!-- Login form -->
		<form-bean
			name="login.form"
			type="org.rti.webcgh.webui.struts.user.LoginForm"/>
		
	<!-- New account form -->	
		<form-bean
			name="new.account.form"
			type="org.rti.webcgh.webui.struts.user.NewAccountForm"/>
			
	<!-- Plot parameters form -->
		<form-bean
			name="plot.parameters.form"
			type="org.rti.webcgh.webui.struts.cart.PlotParametersForm"/>
			
	<!-- Selected experiments form -->
		<form-bean
			name="selected.experiments.form"
			type="org.rti.webcgh.webui.struts.cart.SelectedExperimentsForm"/>
	</form-beans>

	
	<!-- =========================================================== -->
	<!--                   Exception handlers                        -->
	<!-- =========================================================== -->
	
<!--
	<global-exceptions>
	</global-exceptions>
-->
	
	<!-- ================================================= -->
	<!--                   Actions                         -->
	<!-- ================================================= -->
	
	<action-mappings>
	
	<!-- Home -->
		<action
			path="/home"
			type="org.apache.struts.actions.ForwardAction"
			parameter="home.page"/>
				
		<!-- ============ Shopping cart actions ========= -->
		
	<!-- Show cart -->
		<action path="/cart/showCart">
			<forward name="success" path="cart.show.cart"/>
		</action>
			
	<!-- Set plot type -->
		<action
			path="/cart/selectPlotType"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.select.plot.type"/>
		
	<!-- Scatter plot parameters -->
		<action
			path="/cart/scatterPlotParams"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.scatter.plot.params"/>
		
	<!-- Ideogram plot parameters -->
		<action
			path="/cart/ideogramPlotParams"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.ideogram.plot.params"/>
		
	<!-- Bar plot parameters -->
		<action
			path="/cart/barPlotParams"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.bar.plot.params"/>
		
	<!-- Annotation plot parameters -->
		<action
			path="/cart/annotationPlotParams"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.annotation.plot.params"/>
		
	<!-- Frequency plot parameters -->
		<action
			path="/cart/frequencyPlotParams"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.frequency.plot.params"/>
				
	<!-- Set colors -->
		<action
			path="/cart/setColors"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.set.colors"/>
				
	<!-- New plot -->
		<action
			path="/cart/newPlot"
			name="plot.parameters.form"
			validate="false">
			<forward name="success" path="/cart/showPlot.do"/>
		</action>
			
	
	<!-- Show plot -->
		<action
			path="/cart/showPlot"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.show.plot"/>
				
	<!-- Show jobs table -->
		<action
			path="/cart/showJobsTable"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.show.jobs.table"/>
				
	<!-- Job details -->
		<action
			path="/cart/jobDetails"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.job.details"/>
				
	<!-- Set display names of experiments and bioassays -->
		<action
			path="/cart/setDisplayNames"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.set.display.names"/>
				
	<!-- File upload -->
		<action
			path="/cart/fileUpload"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.file.upload"/>
				
	<!-- Select analytic operation -->
		<action
			path="/cart/selectOperation"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.select.operation"/>
				
	<!-- Set analytic operation parameters -->
		<action
			path="/cart/operationParams"
			type="org.apache.struts.actions.ForwardAction"
			parameter="cart.operation.params"/>
				
		<!-- ========= Account management actions ========= -->
		
	<!-- Login -->
		<action
			path="/user/login"
			type="org.apache.struts.actions.ForwardAction"
			parameter="user.login"/>
	
	<!-- Validate login credentials -->			
		<action
			path="/user/validateLogin"
			name="login.form"
			scope="request"
			validate="true"
			input="/user/login.do">
			<forward name="success" path="user.confirm.login"/>
			<forward name="failure" path="/user/login.do"/>
		</action>
			
	<!-- Confirm login -->	
		<action
			path="/user/confirmLogin"
			type="org.apache.struts.actions.ForwardAction"
			parameter="user.confirm.login"/>
			
	<!-- Create account -->
		<action
			path="/user/newAccount"
			type="org.apache.struts.actions.ForwardAction"
			parameter="user.new.account"/>
			
	<!-- Validate login credentials -->			
		<action
			path="/user/createAccount"
			name="new.account.form"
			scope="request"
			validate="true"
			input="/user/newAccount.do">
			<forward name="success" path="user.confirm.new.account"/>
			<forward name="failure" path="/user/newAccount.do"/>
		</action>
		
		<!-- ============= Client plotting actions ======== -->
		
		<action
			path="/client/plot"
			name="plot.parameters.form"
			validate="false">
			<forward name="success" path="/cart/newPlot.do"/>
		</action>
	</action-mappings>
	
	
	<!-- ==================================================== -->
	<!--            Controller                                -->
	<!-- ==================================================== -->

<!-- Spring controller for Tiles -->
	<controller>
	  <set-property property="processorClass"
	      value="org.springframework.web.struts.DelegatingTilesRequestProcessor"/>
	</controller>
	
	<!-- =========================================================== -->
	<!--                  Plug-ins                                   -->
	<!-- =========================================================== -->
	
<!-- Tiles -->
	<plug-in className="org.apache.struts.tiles.TilesPlugin" >
	    <set-property property="definitions-config"
		                 value="/WEB-INF/tiles-config.xml" />
	    <set-property property="moduleAware" value="true" />
	    <set-property property="definitions-parser-validate" value="true" />
	</plug-in>

<!-- Spring context loader -->
	<plug-in className="org.springframework.web.struts.ContextLoaderPlugIn">
	  <set-property property="contextConfigLocation"
	      value="/WEB-INF/applicationContext.xml"/>
	</plug-in>
</struts-config>